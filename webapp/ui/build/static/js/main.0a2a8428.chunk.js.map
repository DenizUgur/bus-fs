{"version":3,"sources":["App.tsx","index.tsx"],"names":["host","App","useState","meta","setMeta","student","setStudent","access","setAccess","MacroFree","setMacroFree","useEffect","fetch","method","then","res","json","data","loaded","headers","body","qs","stringify","email","a","status","accesses","length","state","forEach","el","macrofree","className","Container","Paper","Box","displayName","Autocomplete","id","options","list","getOptionLabel","option","sid","renderInput","params","TextField","label","variant","renderOption","selected","onChange","event","Card","Button","onClick","oid","alert","Checkbox","target","checked","theme","createMuiTheme","palette","primary","main","secondary","ReactDOM","render","StrictMode","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.0a2a8428.chunk.js","sourcesContent":["import {\n\tBox,\n\tButton,\n\tCard,\n\tCheckbox,\n\tContainer,\n\tPaper,\n\tTextField,\n} from \"@material-ui/core\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport React, { useEffect, useState } from \"react\";\nimport qs from \"querystring\";\nimport \"./App.css\";\n\nconst dev = process.env.NODE_ENV !== \"production\";\nconst host = dev ? \"http://localhost:5000\" : \"https://bus-fs.herokuapp.com\";\n\nfunction App() {\n\t//* States\n\tconst [meta, setMeta] = useState<any>();\n\tconst [student, setStudent] = useState<any>();\n\tconst [access, setAccess] = useState(true);\n\tconst [MacroFree, setMacroFree] = useState(false);\n\n\t//* Initialization\n\tuseEffect(() => {\n\t\tfetch(host + \"/manage/meta/all\", {\n\t\t\tmethod: \"POST\",\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tsetMeta(data);\n\t\t\t});\n\t\treturn () => {};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (student && !student.loaded) {\n\t\t\tfetch(host + \"/manage/meta/student\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t\t},\n\t\t\t\tbody: qs.stringify({ email: student.email }),\n\t\t\t}).then(async (data) => {\n\t\t\t\tif (data.status === 200) {\n\t\t\t\t\tconst json = await data.json();\n\t\t\t\t\tsetStudent({\n\t\t\t\t\t\tloaded: true,\n\t\t\t\t\t\t...json,\n\t\t\t\t\t});\n\t\t\t\t\tif (json.accesses.length > 0) {\n\t\t\t\t\t\tsetAccess(true);\n\t\t\t\t\t\tlet state = false;\n\t\t\t\t\t\tjson.accesses.forEach((el: any) => {\n\t\t\t\t\t\t\tif (el.macrofree) state = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetMacroFree(state);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [student]);\n\n\t//* Handlers\n\tconst handleAccess = (event: any) => {\n\t\tsetAccess(false);\n\t\tfetch(host + \"/manage/modify/access\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t\tbody: qs.stringify({\n\t\t\t\toid: student.oid,\n\t\t\t\taccess: false,\n\t\t\t\tmacrofree: MacroFree,\n\t\t\t}),\n\t\t}).then(async (data) => {\n\t\t\tif (data.status === 200) {\n\t\t\t\talert(\"Done\");\n\t\t\t} else {\n\t\t\t\talert(\"Error occured\");\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleMacroFree = (event: any) => {\n\t\tsetMacroFree(event.target.checked);\n\t\tsetAccess(false);\n\t\tfetch(host + \"/manage/modify/access\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t\tbody: qs.stringify({\n\t\t\t\toid: student.oid,\n\t\t\t\taccess: false,\n\t\t\t\tmacrofree: event.target.checked,\n\t\t\t}),\n\t\t}).then(async (data) => {\n\t\t\tif (data.status === 200) {\n\t\t\t\talert(\"Done\");\n\t\t\t} else {\n\t\t\t\talert(\"Error occured\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//* Render\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Container>\n\t\t\t\t<Paper className=\"Stage\">\n\t\t\t\t\t{student && student.loaded ? (\n\t\t\t\t\t\t<Box className=\"StudentInfo\">\n\t\t\t\t\t\t\t<h1>{student.displayName}</h1>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\tStart typing the student's information to get\n\t\t\t\t\t\t\tstarted\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t)}\n\t\t\t\t\t{meta && (\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\tid=\"combo-box-demo\"\n\t\t\t\t\t\t\toptions={meta.list}\n\t\t\t\t\t\t\tgetOptionLabel={(option: any) =>\n\t\t\t\t\t\t\t\toption.sid + \" - \" + option.email\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclassName=\"SearchBox\"\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\tlabel=\"Student ID or E-Mail\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\trenderOption={(option, { selected }) => (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{option.sid}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t{option.email}\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonChange={(event, option) => {\n\t\t\t\t\t\t\t\tsetStudent(option);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{student && student.loaded && (\n\t\t\t\t\t\t<Box className=\"Controls\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<h2>Access Control</h2>\n\t\t\t\t\t\t\t\t{student.accesses.length !== 0 && access ? (\n\t\t\t\t\t\t\t\t\t<Button onClick={handleAccess}>\n\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tStudent haven't accessed the system yet\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<h2>MacroFree</h2>\n\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\tonChange={handleMacroFree}\n\t\t\t\t\t\t\t\t\tchecked={MacroFree}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)}\n\t\t\t\t</Paper>\n\t\t\t</Container>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: \"#1A1423\",\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: \"#B75D69\",\n\t\t},\n\t},\n});\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<ThemeProvider theme={theme}>\n\t\t\t<App />\n\t\t</ThemeProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}